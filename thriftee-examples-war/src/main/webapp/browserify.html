<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>ThriftEE Examples Page</title>
<script type="text/javascript" src="thrift-browserify.js"></script>
<script type="text/javascript" src="thrift-modules.js"></script>
<script type="text/javascript">
(function () {
var thrift = require("thrift"),
    schema = require("ThriftSchemaService"),
    ttypes = require("org_thriftee_compiler_schema_types");

var options = {
  transport: thrift.TBufferedTransport,
  protocol: thrift.TJSONProtocol,
  //path: '/ex/services/endpoints/org_thriftee_compiler_schema/ThriftSchemaService/json',
  path: '/ex/services/endpoints/multiplex/json',
  headers: { 'Connection' : 'close' },
  https: false
};

var multiplexer = new thrift.Multiplexer();
var connection = thrift.createXHRConnection('localhost', 8080, options);
//var schemaClient = thrift.createHttpClient(schema, connection);
var schemaClient = multiplexer.createClient('org_thriftee_compiler_schema.ThriftSchemaService', schema, connection);

connection.on('error', function (err) {
  console.log('Error: ' + err);
});

schemaClient.getSchema(function (error, result) {
  console.log("getSchema() result: ", JSON.stringify(result, null, 2));
});
})();
</script>
<style type="text/css">
.editor-area, .result-area { width: 50%; margin: auto; float: left; }
.result-area pre { overflow: scroll; white-space: pre-wrap; height: 250px; border: 1px solid black; width: 95%; }
</style>
</head>
<body>
  <h1>ThriftEE Examples Page</h1>
  <div class="editor-area">
    <p><textarea rows="24" cols="80" id="editor-textarea"></textarea></p>
    <p><input type="button" id="runIt" value="Run It!" /></p>
  </div>
  <div class="result-area">
    <pre id="result-script-area"></pre>
    <pre id="result-value-area"></pre>
  </div>
  <p>
    <a href="services/">Go to API index</a>
  </p>
</body>
</html>
